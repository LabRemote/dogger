#import json
import numpy
import scipy.interpolate
import ast
import numexpr


U_exc = numpy.array([5.300252471223622,5.300232138885983,5.300230948700366,5.300236552490984,5.300219790710201,5.300210393202924,5.300224601043738,5.300210294020792,5.300228692306797,5.300230824722696,5.300222691787639,5.300221898330565,5.300236899628455,5.300232833160928,5.3002337258001395,5.300235163941095,5.300240470185311,5.300223311675985,5.300225667251686,5.30022923780854])
U_therm = numpy.array([2.8925602767801455,2.892551276001411,2.8925412338102605,2.892560723099751,2.8925536067815782,2.8925516975254824,2.8925536563726455,2.8925592601632633,2.8925473583070853,2.892567343507251,2.892546416076805,2.8925628307201174,2.8925462425080677,2.892558541092785,2.89255702856523,2.8925532596441075,2.8925651367047505,2.8925678146223914,2.89256131819256,2.8925636489727307])
R_ext = 9.93
R = R_ext * 1 / (U_exc/U_therm - 1)

dict_string = "336.098:-40.0,314.553:-39.0,294.524:-38.0,275.897:-37.0,258.563:-36.0,242.427:-35.0,227.398:-34.0,213.394:-33.0,200.339:-32.0,188.163:-31.0,176.803:-30.0,166.198:-29.0,156.294:-28.0,147.042:-27.0,138.393:-26.0,130.306:-25.0,122.741:-24.0,115.661:-23.0,109.032:-22.0,102.824:-21.0,97.006:-20.0,91.553:-19.0,86.439:-18.0,81.641:-17.0,77.138:-16.0,72.911:-15.0,68.940:-14.0,65.209:-13.0,61.703:-12.0,58.405:-11.0,55.304:-10.0,52.385:-9.0,49.638:-8.0,47.050:-7.0,44.613:-6.0,42.317:-5.0,40.151:-4.0,38.110:-3.0,36.184:-2.0,34.366:-1.0,32.651:0.0,31.031:1.0,29.500:2.0,28.054:3.0,26.687:4.0,25.395:5.0,24.172:6.0,23.016:7.0,21.921:8.0,20.885:9.0,19.903:10.0,18.973:11.0,18.092:12.0,17.257:13.0,16.465:14.0,15.714:15.0,15.001:16.0,14.324:17.0,13.682:18.0,13.073:19.0,12.493:20.0,11.943:21.0,11.420:22.0,10.923:23.0,10.450:24.0,10.000:25.0,9.572:26.0,9.165:27.0,8.777:28.0,8.408:29.0,8.056:30.0,7.721:31.0,7.402:32.0,7.097:33.0,6.807:34.0,6.530:35.0,6.266:36.0,6.014:37.0,5.774:38.0,5.544:39.0,5.325:40.0,5.116:41.0,4.916:42.0,4.724:43.0,4.542:44.0,4.367:45.0,4.200:46.0,4.040:47.0,3.887:48.0,3.741:49.0,3.601:50.0"
array_dict = "{" + dict_string + "}"
d = ast.literal_eval(array_dict)
array = numpy.array(list(d.items()), dtype=numpy.float64)
f0 = scipy.interpolate.interp1d(array[:,0], array[:,1], kind='cubic', bounds_error=False, fill_value=-9999.0)

t = f0(R)

print(t)

#table_dict = {336.098:-40.0,314.553:-39.0,294.524:-38.0,275.897:-37.0,258.563:-36.0,242.427:-35.0,227.398:-34.0,213.394:-33.0,200.339:-32.0,188.163:-31.0,176.803:-30.0,166.198:-29.0,156.294:-28.0,147.042:-27.0,138.393:-26.0,130.306:-25.0,122.741:-24.0,115.661:-23.0,109.032:-22.0,102.824:-21.0,97.006:-20.0,91.553:-19.0,86.439:-18.0,81.641:-17.0,77.138:-16.0,72.911:-15.0,68.940:-14.0,65.209:-13.0,61.703:-12.0,58.405:-11.0,55.304:-10.0,52.385:-9.0,49.638:-8.0,47.050:-7.0,44.613:-6.0,42.317:-5.0,40.151:-4.0,38.110:-3.0,36.184:-2.0,34.366:-1.0,32.651:0.0,31.031:1.0,29.500:2.0,28.054:3.0,26.687:4.0,25.395:5.0,24.172:6.0,23.016:7.0,21.921:8.0,20.885:9.0,19.903:10.0,18.973:11.0,18.092:12.0,17.257:13.0,16.465:14.0,15.714:15.0,15.001:16.0,14.324:17.0,13.682:18.0,13.073:19.0,12.493:20.0,11.943:21.0,11.420:22.0,10.923:23.0,10.450:24.0,10.000:25.0,9.572:26.0,9.165:27.0,8.777:28.0,8.408:29.0,8.056:30.0,7.721:31.0,7.402:32.0,7.097:33.0,6.807:34.0,6.530:35.0,6.266:36.0,6.014:37.0,5.774:38.0,5.544:39.0,5.325:40.0,5.116:41.0,4.916:42.0,4.724:43.0,4.542:44.0,4.367:45.0,4.200:46.0,4.040:47.0,3.887:48.0,3.741:49.0,3.601:50.0}
#print(table_dict)
#json_acceptable_string = dict_string.replace("'", "\"")
#d = json.loads("{" + json_acceptable_string + "}")
#array = numpy.fromiter(d.items(), dtype=numpy.float64, count=len(d))
#array_x = numpy.array([336.098,314.553,294.524,275.897])
#array_y = numpy.array([-40.0,-39.0,-38.0,-37.0])
#print(array_x)
#print(array_y)
#R_thermistor = 1e3 * numpy.array([336.098,314.553,294.524,275.897,258.563,242.427,227.398,213.394,200.339,188.163,176.803,166.198,156.294,147.042,138.393,130.306,122.741,115.661,109.032,102.824,97.006,91.553,86.439,81.641,77.138,72.911,68.940,65.209,61.703,58.405,55.304,52.385,49.638,47.050,44.613,42.317,40.151,38.110,36.184,34.366,32.651,31.031,29.500,28.054,26.687,25.395,24.172,23.016,21.921,20.885,19.903,18.973,18.092,17.257,16.465,15.714,15.001,14.324,13.682,13.073,12.493,11.943,11.420,10.923,10.450,10.000,9.572,9.165,8.777,8.408,8.056,7.721,7.402,7.097,6.807,6.530,6.266,6.014,5.774,5.544,5.325,5.116,4.916,4.724,4.542,4.367,4.200,4.040,3.887,3.741,3.601])
#print(R_thermistor)
#t_thermistor = numpy.arange(-40.0, 51.0)
#print(t_thermistor)
